var d=Object.defineProperty;var l=(s,e,t)=>e in s?d(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(l(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();const u=()=>fetch("http://localhost:3000/garage").then(s=>{if(!s.ok)throw new Error("Failed to fetch cars");return s.json()}).catch(s=>{const e=s.message||"Unknown error occurred";return Promise.reject(e)}),c={makes:["Tesla","Ford","Chevrolet","BMW","Toyota","Honda","Mercedes-Benz","Audi","Nissan","Subaru"],models:["Model S","Mustang","Camaro","X5","Corolla","Civic","E-Class","A4","GT-R","WRX"]},g="/liudmilarodzina-JSFE2023Q4/async-race/images/car.svg";class m{constructor(){i(this,"winnersView",null);i(this,"totalCars",0);i(this,"currentPage",1);i(this,"carsPerPage",7)}setWinnersView(e){this.winnersView=e}async displayGarage(){const e=document.createElement("div");e.classList.add("garage-container"),document.body.innerHTML="",document.body.append(e),e.innerHTML=`
    <h2>Garage (${this.totalCars})</h2>
    <p>Page #${this.currentPage}</p>
  `;const t=document.createElement("button");t.id="button-winners",t.textContent="TO WINNERS",t.addEventListener("click",()=>{var o;(o=this.winnersView)==null||o.displayWinners()});const r=document.createElement("button");r.id="button-generate",r.textContent="GENERATE CARS",r.addEventListener("click",()=>{this.generateRandomCars(100)});const a=document.createElement("button");a.textContent="<< Previous Page",a.addEventListener("click",()=>{this.currentPage>1&&(this.currentPage-=1,this.updateVisibilityOfCars(),this.updatePageNumber())});const n=document.createElement("button");n.textContent="Next Page >>",n.addEventListener("click",()=>{const o=Math.ceil(this.totalCars/this.carsPerPage);this.currentPage<o&&(this.currentPage+=1,this.updateVisibilityOfCars(),this.updatePageNumber())}),e.innerHTML=`
      <h2>Garage (${this.totalCars})</h2>
      <p>Page #${this.currentPage}</p>
    `,e.append(r,a,n,t),await this.displayCars()}async displayCars(){const e=await u();this.totalCars=e.length;const t=document.querySelector(".garage-container");for(const r of e){const a=this.renderCar(r);t.append(a)}this.updateTotalCarsCount(),this.updatePageNumber(),this.updateVisibilityOfCars()}updateVisibilityOfCars(){document.querySelector(".garage-container").querySelectorAll(".car-container").forEach((r,a)=>{const n=r;n.style.display="none",a>=(this.currentPage-1)*this.carsPerPage&&a<this.currentPage*this.carsPerPage&&(n.style.display="flex")})}updatePageNumber(){const e=document.querySelector(".garage-container p");e&&(e.textContent=`Page #${this.currentPage}`)}updateTotalCarsCount(){const e=document.querySelector(".garage-container h2");e&&(e.textContent=`Garage (${this.totalCars})`)}renderCar(e){const t=document.createElement("div");return t.classList.add("car-container"),this.renderCarName(e.name,t),this.renderCarImage(e,t),t}renderCarName(e,t){const r=document.createElement("span");r.textContent=e,r.classList.add("car-name"),t.append(r)}renderCarImage(e,t){fetch(g).then(r=>r.text()).then(r=>{const a=r.replace(/fill="#323232"/g,`fill="${e.color}"`),o=new DOMParser().parseFromString(a,"image/svg+xml").documentElement;o&&t.append(o)})}async generateRandomCars(e){const t=Array.from({length:e},()=>this.generateRandomCar()),r=document.querySelector(".garage-container"),a=t.map(o=>this.renderCar(o));r.append(...a),this.totalCars+=e,this.updateTotalCarsCount();const n=Math.ceil(this.totalCars/this.carsPerPage);this.currentPage>n&&(this.currentPage=n),this.updatePageNumber(),this.updateVisibilityOfCars()}generateRandomCar(){const e=c.makes[Math.floor(Math.random()*c.makes.length)],t=c.models[Math.floor(Math.random()*c.models.length)],r=`#${Math.floor(Math.random()*16777215).toString(16)}`,a=Date.now()*1e3+Math.floor(Math.random()*1e3);return{name:`${e} ${t}`,color:r,id:a}}}class h{constructor(e){i(this,"garageView");this.garageView=e}displayWinners(){const e=document.createElement("div");e.classList.add("winners-container"),document.body.innerHTML="",document.body.append(e),e.innerHTML=`
      <h2>Winners (0)</h2>
      <p>Page #1</p>
    `;const t=document.createElement("button");t.classList.add('button-garage"'),t.textContent="TO GARAGE",t.addEventListener("click",()=>{this.garageView.displayGarage()}),e.append(t)}}class p{constructor(){const e=new m,t=new h(e);e.setWinnersView(t),e.displayGarage()}}new p;console.log(`
Done so far:

Two Views (10 points):"Garage" and "Winners"
Garage View Content (5 points): name, the current page number, and the total number of cars
Pagination (10 points): 7 cars per page
Random Car Creation (10 points): create random cars (100 cars per click)

Total: 35
`);
