var P=Object.defineProperty;var b=(o,t,e)=>t in o?P(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var m=(o,t,e)=>(b(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();class h{constructor(t={tag:"",classNames:[],textContent:""}){m(this,"element");this.element=null,this.createElement(t)}createElement(t){this.element=document.createElement(t.tag),this.setCssClasses(t.classNames),this.setTextContent(t.textContent)}setCssClasses(t){t.forEach(e=>{this.element&&this.element.classList.add(e)})}setTextContent(t){this.element&&(this.element.textContent=t)}getElement(){return this.element}}const d={LOGIN_CONTAINER:"login-container",INPUT_FIELD:"input-field",INPUT_LABEL:"input-label",BUTTON_LOGIN:"button-login"},c={FORM:"form",INPUT:"input",LABEL:"label",BUTTON:"button"},T={NAME:"Name:",SURNAME:"Surname:",LOGIN:"Login",BLANK:""},S={NAME:"first-name",SURNAME:"surname",BLANK:""},I="off";class y extends h{constructor(){super({tag:c.FORM,classNames:[d.LOGIN_CONTAINER],textContent:""}),this.createLoginView()}addElement(t,e,n,s,a=""){const i={tag:t,textContent:e,classNames:s},A=new h(i),R=this.getElement();if(R&&(R.append(A.getElement()),t===c.INPUT)){const U=A.getElement();U.name=n,a&&U.setAttribute("autocomplete",a)}}createLoginView(){var n;this.addElement(c.LABEL,T.NAME,S.BLANK,[d.INPUT_LABEL]),this.addElement(c.INPUT,T.BLANK,S.NAME,[d.INPUT_FIELD],I),this.addElement(c.LABEL,T.SURNAME,S.BLANK,[d.INPUT_LABEL]),this.addElement(c.INPUT,T.BLANK,S.SURNAME,[d.INPUT_FIELD],I);const e=new h({tag:c.BUTTON,textContent:T.LOGIN,classNames:[d.BUTTON_LOGIN]}).getElement();e.disabled=!0,(n=this.getElement())==null||n.append(e)}}var u=(o=>(o.Capitalization="Please start with a capitalized Latin letter",o.CharacterRestriction="Please enter only Latin letters and the hyphen (-) symbol",o.LengthRestrictionName="First name must be at least 3 characters long",o.LengthRestrictionSurname="Surname must be at least 4 characters long",o))(u||{});const E=class E{static saveUserData(t){E.validateUserData(t)&&localStorage.setItem(E.USER_DATA_KEY,JSON.stringify(t))}static validateUserData(t){return t&&Object.values(t).every(e=>e.trim()!=="")}static removeUserData(){localStorage.removeItem(E.USER_DATA_KEY)}static getUserData(){const t=localStorage.getItem(E.USER_DATA_KEY)||"{}";return JSON.parse(t)}};m(E,"USER_DATA_KEY","userData");let N=E;const v="Sorry, we are experiencing technical difficulties. Please try again later",x="Logout",C={GAME_CONTAINER:"game-container",BUTTON_LOGOUT:"button-logout"},O={BUTTON:"button",CONTAINER:"div",PARAGRAPH:"p"},D={LOGIN:"login"};class G extends h{constructor(){super({tag:O.CONTAINER,classNames:[C.GAME_CONTAINER],textContent:""}),this.addContent(),this.addLogoutButton()}addContent(){var e;const t=document.createElement(O.PARAGRAPH);t.textContent=v,(e=this.getElement())==null||e.append(t)}addLogoutButton(){var e;const t=document.createElement(O.BUTTON);t.textContent=x,t.classList.add(C.BUTTON_LOGOUT),t.addEventListener("click",()=>{N.removeUserData();const s=window.location.pathname.split("/").slice(0,-1).join("/");window.location.href=`${window.location.origin}${s}/#${D.LOGIN}`}),(e=this.getElement())==null||e.append(t)}}const $="ENGLISH PUZZLE",V="Welcome, ",F="Click on words, collect phrases. Words can be dragged and dropped. Select tooltips in the menu",K="Start Game",j="Logout",g={USER_GREETING:"user-greeting",CONTENT_CONTAINER:"content-container",START_SCREEN_CONTAINER:"start-screen-container",BUTTON_START:"button-start",BUTTON_LOGOUT:"button-logout"},l={BUTTON:"button",CONTAINER:"div",PARAGRAPH:"p",SPAN:"span"},M={LOGIN:"login",GAME:"game"};class _ extends h{constructor(){super({tag:l.CONTAINER,classNames:[g.START_SCREEN_CONTAINER],textContent:""}),this.addContent(),this.addStartButton(),this.addLogoutButton()}addContent(){var A;const t=document.createElement(l.PARAGRAPH);t.textContent=$;const e=document.createElement(l.SPAN),n=N.getUserData(),s=`${n.name} ${n.surname}`;e.textContent=`${V} ${s}!`,e.classList.add(g.USER_GREETING);const a=document.createElement(l.SPAN);a.textContent=F;const i=document.createElement(l.CONTAINER);i.classList.add(g.CONTENT_CONTAINER),i.append(t,e,a),(A=this.getElement())==null||A.append(i)}addStartButton(){var e;const t=document.createElement(l.BUTTON);t.textContent=K,t.classList.add(g.BUTTON_START),t.addEventListener("click",()=>{window.location.hash=M.GAME;const n=new G;document.body.innerHTML="",document.body.append(n.getElement())}),(e=this.getElement())==null||e.append(t)}addLogoutButton(){var e;const t=document.createElement(l.BUTTON);t.textContent=j,t.classList.add(g.BUTTON_LOGOUT),t.addEventListener("click",()=>{N.removeUserData();const s=window.location.pathname.split("/").slice(0,-1).join("/");window.location.href=`${window.location.origin}${s}/#${M.LOGIN}`}),(e=this.getElement())==null||e.append(t)}}const L={ERROR_MESSAGE_CLASS:"error-message"},w={INPUT:"input",SPAN:"span"},f={START:"start",GAME:"game"},p={NAME:"name"},B={FIRST_NAME:"first-name",SURNAME:"surname",BLANK:""},z=3,q=4;class r{constructor(t,e,n){m(this,"formElement");m(this,"loginButton");m(this,"allInputs");this.formElement=t,this.loginButton=this.formElement.querySelector(e),this.allInputs=Array.from(this.formElement.querySelectorAll(n))}setupValidation(){this.loginButton&&(this.loginButton.addEventListener("click",()=>{const t=this.getUserDataFromInputs();t&&N.saveUserData(t),r.displayStartScreenView()}),this.allInputs.forEach(t=>{t.addEventListener("input",()=>{this.validateEmptyInputs(),r.validateUppercaseFirstLetter(t),this.validateCharacterRestriction(t),r.validateMinimumLength(t)}),t.tagName===w.INPUT&&t.setAttribute("required","true")}))}validateEmptyInputs(){const t=this.allInputs.every(e=>e.value.trim()!==""&&r.validateUppercaseFirstLetter(e)&&this.validateCharacterRestriction(e)&&r.validateMinimumLength(e));this.loginButton&&(this.loginButton.disabled=!t)}static isFirstLetterUppercase(t){const e=t.value.trim().charAt(0);return/^[A-Z]/.test(e)}static validateUppercaseFirstLetter(t){if(!r.isFirstLetterUppercase(t)){const e=u.Capitalization;return r.showErrorMessage(t,e),!1}return!0}validateCharacterRestriction(t){if(!/^[a-zA-Z-]*$/.test(t.value)){const n=u.CharacterRestriction;return this.hideAllErrorMessages(t),r.showErrorMessage(t,n),!1}return r.hideErrorMessage(t),!0}static validateMinimumLength(t){const e=t.getAttribute(p.NAME),n=e===B.FIRST_NAME?z:q,s=t.nextElementSibling;if(s&&s.className===L.ERROR_MESSAGE_CLASS)return!0;if(!r.isFirstLetterUppercase(t)){const a=u.Capitalization;return r.hideErrorMessage(t),r.showErrorMessage(t,a),!1}if(t.value.length<n){const a=e===B.FIRST_NAME?u.LengthRestrictionName:u.LengthRestrictionSurname;return r.showErrorMessage(t,a),!1}return r.hideErrorMessage(t),!0}static showErrorMessage(t,e){const n=t.nextElementSibling;if(!n||n.className!==L.ERROR_MESSAGE_CLASS){const s=document.createElement(w.SPAN);s.className=L.ERROR_MESSAGE_CLASS,s.textContent=e,t.insertAdjacentElement("afterend",s)}}static hideErrorMessage(t){const e=t.nextElementSibling;e&&e.className===L.ERROR_MESSAGE_CLASS&&e.remove()}hideAllErrorMessages(t){this.allInputs.forEach(e=>{r.skipErrorHiding(t,e)||r.hideErrorMessage(e)})}static skipErrorHiding(t,e){return e===t?!1:t.getAttribute(p.NAME)!==e.getAttribute(p.NAME)}getUserDataFromInputs(){const t={};return this.allInputs.forEach(e=>{const n=e.getAttribute(p.NAME),s=e.value.trim();n&&s&&(t[n]=s)}),Object.keys(t).length>0?t:null}static displayStartScreenView(){const e=new _().getElement();e&&(window.history.pushState(null,"",`#${f.START}`),document.body.innerHTML="",document.body.append(e))}static stayLoggedInOnLoad(){document.addEventListener("DOMContentLoaded",()=>{const{hash:t}=window.location;if(t===`#${f.START}`){const n=new _().getElement();n&&(document.body.innerHTML="",document.body.append(n))}if(t===`#${f.GAME}`){const n=new G().getElement();n&&(document.body.innerHTML="",document.body.append(n))}})}}const H="button",X="input";class Y{static createView(){const t=new y,e=document.body;if(e){e.append(t.getElement());const n=t.getElement();new r(n,H,X).setupValidation()}r.stayLoggedInOnLoad()}}class Z{constructor(){Y.createView()}}new Z;
