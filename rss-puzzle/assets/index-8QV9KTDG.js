var b=Object.defineProperty;var v=(o,e,t)=>e in o?b(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var m=(o,e,t)=>(v(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class u{constructor(e={tag:"",classNames:[],textContent:""}){m(this,"element");this.element=null,this.createElement(e)}createElement(e){this.element=document.createElement(e.tag),this.setCSSClasses(e.classNames),this.setTextContent(e.textContent)}setCSSClasses(e){e.forEach(t=>{this.element&&this.element.classList.add(t)})}setTextContent(e){this.element&&(this.element.textContent=e)}getElement(){return this.element}}var c=(o=>(o.Capitalization="Please start with a capitalized Latin letter",o.CharacterRestriction="Please enter only Latin letters and the hyphen (-) symbol",o.LengthRestrictionName="First name must be at least 3 characters long",o.LengthRestrictionSurname="Surname must be at least 4 characters long",o))(c||{});class d{static saveUserData(e){d.validateUserData(e)&&localStorage.setItem("userData",JSON.stringify(e))}static validateUserData(e){return!e||Object.keys(e).length===0?!1:Object.values(e).every(t=>t.trim()!=="")}static removeUserData(){localStorage.removeItem("userData")}static getUserData(){const e=localStorage.getItem("userData")||"{}";return JSON.parse(e)}}class E extends u{constructor(){super({tag:"div",classNames:["logged-in-container"],textContent:""}),this.addContent(),this.addLogoutButton()}addContent(){var l;const e=document.createElement("p");e.textContent="ENGLISH PUZZLE";const t=document.createElement("span"),n=d.getUserData(),s=n&&n.name&&n.surname?`${n.name} ${n.surname}`:"Friend";t.textContent=`Welcome, ${s}!`,t.classList.add("user-greeting");const r=document.createElement("span");r.textContent="Click on words, collect phrases. Words can be dragged and dropped. Select tooltips in the menu";const i=document.createElement("div");i.classList.add("content-container"),i.append(e,t,r),(l=this.getElement())==null||l.append(i)}addLogoutButton(){var t;const e=document.createElement("button");e.textContent="Logout",e.classList.add("button-logout"),e.addEventListener("click",()=>{d.removeUserData(),window.location.hash="login";const n=new g;document.body.innerHTML="",document.body.append(n.getElement())}),(t=this.getElement())==null||t.append(e)}}class a{constructor(e,t,n){m(this,"formElement");m(this,"loginButton");m(this,"allInputs");this.formElement=e,this.loginButton=this.formElement.querySelector(t),this.allInputs=Array.from(this.formElement.querySelectorAll(n))}setupValidation(){this.loginButton&&(this.loginButton.disabled=!0,this.loginButton.addEventListener("click",()=>{const e=this.getUserDataFromInputs();e&&d.saveUserData(e);const n=new E().getElement();n&&(window.history.pushState(null,"","#start"),document.body.innerHTML="",document.body.append(n))}),this.allInputs.forEach(e=>{e.addEventListener("input",()=>{this.validateEmptyInputs(),a.validateUppercaseFirstLetter(e),this.validateCharacterRestriction(e),a.validateMinimumLength(e)}),e.tagName==="input"&&e.setAttribute("required","true")}))}static checkUserData(){return localStorage.getItem("userData")!==null}validateEmptyInputs(){const e=this.allInputs.every(t=>t.value.trim()!==""&&a.validateUppercaseFirstLetter(t)&&this.validateCharacterRestriction(t)&&a.validateMinimumLength(t));this.loginButton&&(this.loginButton.disabled=!e)}getUserDataFromInputs(){const e={};return this.allInputs.forEach(t=>{const n=t.getAttribute("name"),s=t.value.trim();n&&s&&(e[n]=s)}),Object.keys(e).length>0?e:null}static isFirstLetterUppercase(e){const t=e.value.trim().charAt(0);return/^[A-Z]/.test(t)}static validateUppercaseFirstLetter(e){if(!a.isFirstLetterUppercase(e)){const t=c.Capitalization;return a.showErrorMessage(e,t),!1}return!0}validateCharacterRestriction(e){if(!/^[a-zA-Z-]*$/.test(e.value)){const n=c.CharacterRestriction;return this.hideAllErrorMessages(e),a.showErrorMessage(e,n),!1}return a.hideErrorMessage(e),!0}static validateMinimumLength(e){const t=e.getAttribute("name"),r=t==="name"?3:4,i=e.nextElementSibling;if(i&&i.className==="error-message")return!0;if(!a.isFirstLetterUppercase(e)){const l=c.Capitalization;return a.hideErrorMessage(e),a.showErrorMessage(e,l),!1}if(e.value.length<r){const l=t==="name"?c.LengthRestrictionName:c.LengthRestrictionSurname;return a.showErrorMessage(e,l),!1}return a.hideErrorMessage(e),!0}static showErrorMessage(e,t){const n=e.nextElementSibling;if(!n||n.className!=="error-message"){const s=document.createElement("span");s.className="error-message",s.textContent=t,e.insertAdjacentElement("afterend",s)}}static hideErrorMessage(e){const t=e.nextElementSibling;t&&t.className==="error-message"&&t.remove()}hideAllErrorMessages(e){this.allInputs.forEach(t=>{a.skipErrorHiding(e,t)||a.hideErrorMessage(t)})}static skipErrorHiding(e,t){return t===e?!1:e.getAttribute("name")!==t.getAttribute("name")}}class g extends u{constructor(){super({tag:"form",classNames:["login-container"],textContent:""}),this.createLoginView();const e=this.getElement();new a(e,"button","input").setupValidation()}addElement(e,t,n,s,r=""){const i={tag:e,textContent:t,attr:n,classNames:s,autocomplete:r},l=new u(i),f=this.getElement();if(f&&(f.append(l.getElement()),e==="input")){const p=l.getElement();p.name=n,r&&p.setAttribute("autocomplete",r)}}createLoginView(){this.addElement("label","Name:","name",["input-label"]),this.addElement("input","","name",["input-field","name"],"off"),this.addElement("label","Surname:","",["input-label"]),this.addElement("input","","surname",["input-field","surname"],"off"),this.addElement("button","Login","",["button","button-login"])}static handleDOMContentLoaded(){document.addEventListener("DOMContentLoaded",()=>{const{hash:e}=window.location;if(e==="#start"){const n=new E().getElement();n&&(document.body.innerHTML="",document.body.append(n))}})}}class h{constructor(){h.createView()}static createView(){const e=new g,t=document.body;t&&t.append(e.getElement()),g.handleDOMContentLoaded()}}new h;console.log(`Completed tasks: 01, 02, 03, 04, 05, 06 (so far)
Total: 40 points`);
