var R=Object.defineProperty;var w=(a,t,e)=>t in a?R(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var d=(a,t,e)=>(w(a,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class N{constructor(t={tag:"",classNames:[],textContent:""}){d(this,"element");this.element=null,this.createElement(t)}createElement(t){this.element=document.createElement(t.tag),this.setCssClasses(t.classNames),this.setTextContent(t.textContent)}setCssClasses(t){t.forEach(e=>{this.element&&this.element.classList.add(e)})}setTextContent(t){this.element&&(this.element.textContent=t)}getElement(){return this.element}}const U="FUN CHAT",_="The chat functionality is currently being implemented. Please, try again later",B="About",C="Logout",P="The Rolling Scopes School educational project (JavaScript/Front-end 2023Q4)",y="by Liudmila Rodzina",I="off",b="button",M="input",v=2,G=3,r={USER_GREETING:"user-greeting",LOGIN_CONTAINER:"login-container",CONTENT_CONTAINER:"content-container",CHAT_CONTAINER:"chat-container",INFO_CONTAINER:"info-container",BUTTON_LOGIN:"button-login",BUTTON_LOGOUT:"button-logout",BUTTON_INFO:"button-info",INPUT_FIELD:"input-field",INPUT_LABEL:"input-label",ERROR_MESSAGE_CLASS:"error-message"},o={CONTAINER:"div",FORM:"form",BUTTON:"button",INPUT:"input",LABEL:"label",PARAGRAPH:"p",SPAN:"span"},u={LOGIN:"Login:",PASSWORD:"Password:",LOGIN_BTN:"Login",BLANK:""},T={NAME:"name"},E={LOGIN:"login",PASSWORD:"password",BLANK:""},g={INFO:"info",CHAT:"chat"};class D extends N{constructor(){super({tag:o.FORM,classNames:[r.LOGIN_CONTAINER],textContent:""}),this.createLoginView()}addElement(t,e,n,s,i=""){const m={tag:t,textContent:e,classNames:s},O=new N(m),f=this.getElement();if(f&&(f.append(O.getElement()),t===o.INPUT)){const L=O.getElement();L.name=n,i&&L.setAttribute("autocomplete",i)}}createLoginView(){var n;this.addElement(o.LABEL,u.LOGIN_BTN,E.BLANK,[r.INPUT_LABEL]),this.addElement(o.INPUT,u.BLANK,E.LOGIN,[r.INPUT_FIELD],I),this.addElement(o.LABEL,u.PASSWORD,E.BLANK,[r.INPUT_LABEL]),this.addElement(o.INPUT,u.BLANK,E.PASSWORD,[r.INPUT_FIELD],I);const e=new N({tag:o.BUTTON,textContent:u.LOGIN_BTN,classNames:[r.BUTTON_LOGIN]}).getElement();e.disabled=!0,(n=this.getElement())==null||n.append(e)}}var A=(a=>(a.CharacterRestriction="Please enter only Latin letters or digits (0-9)",a.LengthRestrictionLogin="Login must be at least 2 characters long",a.LengthRestrictionPassword="Password must be at least 3 characters long",a))(A||{});const l=class l{static saveUserData(t){l.validateUserData(t)&&localStorage.setItem(l.USER_DATA_KEY,JSON.stringify(t))}static validateUserData(t){return t&&Object.values(t).every(e=>e.trim()!=="")}static removeUserData(){localStorage.removeItem(l.USER_DATA_KEY)}static getUserData(){const t=localStorage.getItem(l.USER_DATA_KEY)||"{}";return JSON.parse(t)}};d(l,"USER_DATA_KEY","userData");let h=l;class S extends N{constructor(){super({tag:o.CONTAINER,classNames:[r.INFO_CONTAINER],textContent:""}),this.addContent(),this.addLogoutButton()}addContent(){var n;const t=document.createElement(o.PARAGRAPH);t.textContent=P;const e=document.createElement(o.SPAN);e.textContent=y,(n=this.getElement())==null||n.append(t,e)}addLogoutButton(){var e;const t=document.createElement(o.BUTTON);t.textContent=C,t.classList.add(r.BUTTON_LOGOUT),t.addEventListener("click",()=>{h.removeUserData();const s=window.location.pathname.split("/").slice(0,-1).join("/");window.location.href=`${window.location.origin}${s}/`}),(e=this.getElement())==null||e.append(t)}}class p extends N{constructor(){super({tag:o.CONTAINER,classNames:[r.CHAT_CONTAINER],textContent:""}),this.addContent(),this.addInfoButton(),this.addLogoutButton()}addContent(){var s;const t=document.createElement(o.PARAGRAPH);t.textContent=U;const e=document.createElement(o.SPAN);e.textContent=_;const n=document.createElement(o.CONTAINER);n.classList.add(r.CONTENT_CONTAINER),n.append(t,e),(s=this.getElement())==null||s.append(n)}addInfoButton(){var e;const t=document.createElement(o.BUTTON);t.textContent=B,t.classList.add(r.BUTTON_INFO),t.addEventListener("click",()=>{window.location.hash=g.INFO;const n=new S;document.body.innerHTML="",document.body.append(n.getElement())}),(e=this.getElement())==null||e.append(t)}addLogoutButton(){var e;const t=document.createElement(o.BUTTON);t.textContent=C,t.classList.add(r.BUTTON_LOGOUT),t.addEventListener("click",()=>{h.removeUserData();const s=window.location.pathname.split("/").slice(0,-1).join("/");window.location.href=`${window.location.origin}${s}/`}),(e=this.getElement())==null||e.append(t)}}class c{constructor(t,e,n){d(this,"formElement");d(this,"loginButton");d(this,"allInputs");this.formElement=t,this.loginButton=this.formElement.querySelector(e),this.allInputs=Array.from(this.formElement.querySelectorAll(n))}setupValidation(){this.loginButton&&(this.loginButton.addEventListener("click",()=>{const t=this.getUserDataFromInputs();t&&h.saveUserData(t),c.displayChatView()}),this.allInputs.forEach(t=>{t.addEventListener("input",()=>{this.validateEmptyInputs(),this.validateCharacterRestriction(t),c.validateMinimumLength(t)}),t.tagName===o.INPUT&&t.setAttribute("required","true")}))}validateEmptyInputs(){const t=this.allInputs.every(e=>e.value.trim()!==""&&this.validateCharacterRestriction(e)&&c.validateMinimumLength(e));this.loginButton&&(this.loginButton.disabled=!t)}validateCharacterRestriction(t){if(!/^[a-zA-Z0-9]*$/.test(t.value)){const n=A.CharacterRestriction;return this.hideAllErrorMessages(t),c.showErrorMessage(t,n),!1}return c.hideErrorMessage(t),!0}static validateMinimumLength(t){const e=t.getAttribute(T.NAME),n=e===E.LOGIN?v:G,s=t.nextElementSibling;if(s&&s.className===r.ERROR_MESSAGE_CLASS)return!0;if(t.value.length<n){const i=e===E.LOGIN?A.LengthRestrictionLogin:A.LengthRestrictionPassword;return c.showErrorMessage(t,i),!1}return c.hideErrorMessage(t),!0}static showErrorMessage(t,e){const n=t.nextElementSibling;if(!n||n.className!==r.ERROR_MESSAGE_CLASS){const s=document.createElement(o.SPAN);s.className=r.ERROR_MESSAGE_CLASS,s.textContent=e,t.insertAdjacentElement("afterend",s)}}static hideErrorMessage(t){const e=t.nextElementSibling;e&&e.className===r.ERROR_MESSAGE_CLASS&&e.remove()}hideAllErrorMessages(t){this.allInputs.forEach(e=>{c.skipErrorHiding(t,e)||c.hideErrorMessage(e)})}static skipErrorHiding(t,e){return e===t?!1:t.getAttribute(T.NAME)!==e.getAttribute(T.NAME)}getUserDataFromInputs(){const t={};return this.allInputs.forEach(e=>{const n=e.getAttribute(T.NAME),s=e.value.trim();n&&s&&(t[n]=s)}),Object.keys(t).length>0?t:null}static displayChatView(){const e=new p().getElement();e&&(window.history.pushState(null,"",`#${g.CHAT}`),document.body.innerHTML="",document.body.append(e))}static stayLoggedInOnLoad(){document.addEventListener("DOMContentLoaded",()=>{const{hash:t}=window.location;if(t===`#${g.CHAT}`){const n=new p().getElement();n&&(document.body.innerHTML="",document.body.append(n))}if(t===`#${g.INFO}`){const n=new S().getElement();n&&(document.body.innerHTML="",document.body.append(n))}})}}class x{static createView(){const t=new D,e=document.body;if(e){e.append(t.getElement());const n=t.getElement();new c(n,b,M).setupValidation()}c.stayLoggedInOnLoad()}}class F{constructor(){x.createView()}}new F;console.log(`
Hi! I'm sorry for the inconvenience, but the project is still in progress.
I would be very grateful if you could return to the review later`);
